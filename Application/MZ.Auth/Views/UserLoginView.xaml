<UserControl x:Class="MZ.Auth.Views.UserLoginView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:prism="http://prismlibrary.com/"       
             xmlns:converters="clr-namespace:MZ.Resource.Converters;assembly=MZ.Resource"
             xmlns:managers="clr-namespace:MZ.Resource.Managers;assembly=MZ.Resource" 
             xmlns:viewmodels="clr-namespace:MZ.Auth.ViewModels" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             d:DataContext="{d:DesignInstance Type=viewmodels:UserLoginViewModel}"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             prism:ViewModelLocator.AutoWireViewModel="True"
             Background="Transparent"
             HorizontalAlignment="Center"
             VerticalAlignment="Center"
             MinWidth="640">
    <UserControl.Resources>
        <converters:PasswordConverter x:Key="PasswordConverter"/>
        <converters:PlaceholderConverter x:Key="PlaceholderConverter"/>
        <converters:VisibilityConverter x:Key="VisibilityConverter"/>
    </UserControl.Resources>

    <Border CornerRadius="8" 
            BorderThickness="1"
            BorderBrush="{DynamicResource MahApps.Brushes.Gray9}"
            Background="{DynamicResource MahApps.Brushes.ThemeBackground}" 
            Padding="16">
        <Grid Margin="32">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="1*"/>
            </Grid.RowDefinitions>
            <StackPanel Grid.Row="0" Margin="8">
                <managers:SvgManager x:Name="SvgViewbox" 
                                     Source="pack://application:,,,/MZ.Resource;component/Assets/Svgs/title.svg" 
                                     AutoSize="True" 
                                     OptimizePath="False" 
                                     TextAsGeometry="True"
                                     Fill="{DynamicResource MahApps.Brushes.AccentBase}">
                </managers:SvgManager>

            </StackPanel>
            <StackPanel Grid.Row="1" Margin="8">
                <StackPanel Margin="8" >
                    <TextBlock Text="{DynamicResource LngUserLoginRegion_Username}"
                               Foreground="{DynamicResource MahApps.Brushes.Accent}"
                               Margin="0,0,0,4"/>
                    <TextBox FontSize="16"
                             MaxLength="20"
                             Text="{Binding Path=User.Username}" />
                </StackPanel>
                <StackPanel Margin="8" >
                    <TextBlock Text="{DynamicResource LngUserLoginRegion_Password}"
                               Foreground="{DynamicResource MahApps.Brushes.Accent}"
                               Margin="0,0,0,4"/>
                    <PasswordBox FontSize="16"
                                 MaxLength="20"
                                 managers:PasswordManager.Attach="True"
                                 managers:PasswordManager.Password="{Binding Path=User.Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource PasswordConverter} }"/>
                </StackPanel>
                <CheckBox IsChecked="{Binding Path=User.IsUsernameSave}" 
                          Margin="8" 
                          FontSize="12" 
                          Content="{DynamicResource LngUserLoginRegion_SaveId}"/>
                <Separator Margin="8" Opacity="0.5"/>
                <TextBlock Text="{Binding Path=User.Message}"
                           Foreground="Red"
                           Margin="8"
                           Visibility="{Binding Path=User.MessageVisibility, Converter={StaticResource VisibilityConverter}}"/>
                <Button Margin="8" Padding="4" FontSize="20"
                        Command="{Binding Path=LoginCommand}"
                        Content="{DynamicResource LngUserLoginRegion_Login}"/>
            </StackPanel>
            <StackPanel Grid.Row="2" Margin="8" Orientation="Horizontal" HorizontalAlignment="Right">
                <Button Background="Transparent" Command="{Binding Path=RegisterCommand}" Margin="8" Padding="4" Content="{DynamicResource LngUserLoginRegion_Register}"/>
            </StackPanel>
            <StackPanel Grid.Row="3" Margin="8" Orientation="Horizontal" VerticalAlignment="Bottom" HorizontalAlignment="Center">
                <Label Content="{Binding Path=BuildVersion}" Opacity="0.5"/>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>
